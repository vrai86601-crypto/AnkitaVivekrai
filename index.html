<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivek AI ¬∑ Professional Core</title>
    <style>
        :root { --primary: #ff3333; --bg: #0a0c10; --card: #161b22; --text: #e6edf3; --error: #ff4444; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); }
        nav { padding: 15px 5%; border-bottom: 1px solid #30363d; display: flex; justify-content: space-between; align-items: center; background: rgba(10, 12, 16, 0.9); }
        .container { max-width: 1100px; margin: 30px auto; padding: 0 20px; }
        .dashboard { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .panel { background: var(--card); border: 1px solid #30363d; border-radius: 12px; padding: 20px; }
        textarea, select { width: 100%; background: #0d1117; border: 1px solid #30363d; border-radius: 8px; padding: 12px; color: white; margin-bottom: 15px; }
        .btn { width: 100%; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        
        /* Error Logging Style */
        .error-log { background: #2a1111; border: 1px solid var(--error); color: var(--error); padding: 15px; border-radius: 8px; margin-top: 20px; display: none; font-family: monospace; font-size: 0.85rem; }
        .output-area { margin-top: 20px; background: #0d1117; padding: 20px; border-radius: 8px; border: 1px solid #333; display: none; }
        .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<nav>
    <div style="font-weight: 800; font-size: 1.2rem;">VIVEK AI CORE</div>
    <div><span id="status-dot" class="status-dot" style="background: #555;"></span> <span id="status-text" style="font-size: 0.8rem;">OFFLINE</span></div>
</nav>

<div class="container">
    <div class="dashboard">
        <div class="panel">
            <select id="edu-level">
                <option value="School">School (KG-12)</option>
                <option value="University">University (Shivaji/DU)</option>
                <option value="NTPC">Railway NTPC / Govt Exams</option>
            </select>
            <textarea id="user-input" placeholder="Magnetism, Calculus ‡§Ø‡§æ NTPC GK ‡§Ø‡§π‡§æ‡§Å ‡§™‡•Ç‡§õ‡•á‡§Ç..."></textarea>
            <button id="action-btn" class="btn" onclick="generateResponse()">ANALYZE DATA</button>

            <div id="error-display" class="error-log"></div>

            <div id="response-box" class="output-area">
                <div style="color: var(--primary); font-weight: bold; margin-bottom: 10px;">GENERATED INSIGHT:</div>
                <div id="text-out" style="white-space: pre-wrap;"></div>
            </div>
        </div>

        <div class="panel" style="text-align: center;">
            <div id="avatar" style="font-size: 3.5rem;">üë∂</div>
            <h3 id="rank-text" style="margin: 10px 0;">RANK: NEW BORN</h3>
            <div style="background: #0d1117; padding: 15px; border-radius: 8px; margin-top: 15px;">
                <div style="font-size: 1.5rem; font-weight: 800; color: var(--primary);" id="brain-count">0</div>
                <small>Topics Mastered</small>
            </div>
            <div style="margin-top: 20px; text-align: left; font-size: 0.8rem; color: #888;">
                <b>LOGIC:</b> DeepSeek-R1<br>
                <b>CONTEXT:</b> Cogito V2.1
            </div>
        </div>
    </div>
</div>

<script>
    const API_KEY = "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";

    function updateUI() {
        const brain = JSON.parse(localStorage.getItem('v_core_v1') || '[]');
        document.getElementById('brain-count').innerText = brain.length;
        
        let rank = 'NEW BORN', icon = 'üë∂';
        if(brain.length >= 30) { rank = 'PROFESSOR'; icon = 'üë®‚Äçüè´'; }
        else if(brain.length >= 15) { rank = 'SENIOR STUDENT'; icon = 'üßë‚Äçüéì'; }
        else if(brain.length >= 5) { rank = 'JUNIOR ANALYST'; icon = 'üë¶'; }
        
        document.getElementById('rank-text').innerText = `RANK: ${rank}`;
        document.getElementById('avatar').innerText = icon;
    }

    async function generateResponse() {
        const input = document.getElementById('user-input').value.trim();
        const btn = document.getElementById('action-btn');
        const errBox = document.getElementById('error-display');
        const outBox = document.getElementById('response-box');
        const statusDot = document.getElementById('status-dot');

        if(!input) return alert("‡§ü‡•â‡§™‡§ø‡§ï ‡§≤‡§ø‡§ñ‡•á‡§Ç!");

        // Reset UI
        errBox.style.display = 'none';
        outBox.style.display = 'none';
        btn.disabled = true;
        btn.innerText = "CONNECTING TO AI NODES...";
        statusDot.style.background = "#ffd700";

        try {
            const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                method: "POST",
                headers: { 
                    "Authorization": `Bearer ${API_KEY}`,
                    "Content-Type": "application/json",
                    "HTTP-Referer": window.location.href 
                },
                body: JSON.stringify({
                    "model": "google/gemini-2.0-flash-exp:free",
                    "messages": [{ "role": "user", "content": input }]
                })
            });

            const data = await res.json();

            if (!res.ok) {
                // ‡§Ø‡§π ‡§Ö‡§∏‡§≤‡•Ä ‡§è‡§∞‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§ó‡§æ
                throw new Error(`API ERROR ${res.status}: ${data.error?.message || "Unknown issue"}`);
            }

            document.getElementById('text-out').innerText = data.choices[0].message.content;
            outBox.style.display = 'block';
            statusDot.style.background = "#00ff00";

            let brain = JSON.parse(localStorage.getItem('v_core_v1') || '[]');
            brain.push(input);
            localStorage.setItem('v_core_v1', JSON.stringify(brain));
            updateUI();

        } catch (err) {
            statusDot.style.background = "#ff0000";
            errBox.style.display = 'block';
            errBox.innerHTML = `‚ö†Ô∏è <b>SYSTEM ERROR DETECTED:</b><br>${err.message}`;
        } finally {
            btn.disabled = false;
            btn.innerText = "ANALYZE DATA";
        }
    }
    window.onload = updateUI;
</script>
</body>
</html>
