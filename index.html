<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Portal ‚Äì ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§æ ‡§®‡§Ø‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ</title>

    <!-- ‡§´‡•â‡§®‡•ç‡§ü ‡§î‡§∞ ‡§Ü‡§á‡§ï‡•â‡§® -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Devanagari:wght@400;600&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase (‡§ï‡•â‡§Æ‡•ç‡§™‡•à‡§ü) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #e31e24;
            --primary-dark: #b8141a;
            --dark: #0b0b0b;
            --card-bg: rgba(20, 20, 20, 0.85);
            --text: #ffffff;
            --input-bg: rgba(255, 255, 255, 0.08);
            --border-light: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Poppins', 'IBM Plex Sans Devanagari', sans-serif;
            background: linear-gradient(145deg, #0f0f0f 0%, #1a1a1a 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 16px;
            position: relative;
            backdrop-filter: blur(2px);
        }

        /* ‡§ó‡•ç‡§≤‡§æ‡§∏‡§Æ‡•â‡§∞‡•ç‡§´‡§ø‡§ú‡•ç‡§Æ ‡§ï‡§æ‡§∞‡•ç‡§° */
        .auth-box {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-light);
            border-radius: 32px;
            padding: 36px 28px;
            width: 100%;
            max-width: 420px;
            box-shadow: 0 25px 50px -8px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(227, 30, 36, 0.2) inset;
            transition: transform 0.3s ease;
        }

        .auth-box:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: var(--primary);
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 5px rgba(227, 30, 36, 0.3);
        }

        .subhead {
            color: #aaa;
            font-size: 15px;
            margin-bottom: 28px;
            border-bottom: 1px dashed #333;
            padding-bottom: 16px;
        }

        .form-input {
            width: 100%;
            padding: 15px 18px;
            background: var(--input-bg);
            border: 1px solid var(--border-light);
            border-radius: 40px;
            color: white;
            font-size: 15px;
            outline: none;
            transition: all 0.3s;
            margin-bottom: 16px;
            backdrop-filter: blur(5px);
        }

        .form-input:focus {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(227, 30, 36, 0.2);
        }

        .form-input::placeholder {
            color: #888;
            font-weight: 300;
        }

        .btn-main {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary), #c01a20);
            border: none;
            border-radius: 40px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(227, 30, 36, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            letter-spacing: 0.3px;
        }

        .btn-main:hover {
            background: linear-gradient(135deg, #c01a20, var(--primary));
            transform: scale(1.02);
            box-shadow: 0 12px 28px rgba(227, 30, 36, 0.6);
        }

        .btn-google {
            width: 100%;
            padding: 14px;
            background: white;
            border: none;
            border-radius: 40px;
            color: #2c3e50;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 18px;
            transition: 0.3s;
            border: 1px solid rgba(0,0,0,0.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-google:hover {
            background: #f8f8f8;
            transform: scale(1.02);
            box-shadow: 0 8px 18px rgba(0,0,0,0.3);
        }

        .toggle-text {
            margin-top: 24px;
            font-size: 15px;
            color: #aaa;
        }

        .toggle-text a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            border-bottom: 1px dotted var(--primary);
            padding-bottom: 2px;
        }

        .toggle-text a:hover {
            color: #ff4d4d;
        }

        .hidden {
            display: none;
        }

        /* ‡§µ‡•á‡§≤‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® */
        #welcomeScreen {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            padding: 48px 36px;
            border-radius: 40px;
            border: 1px solid var(--border-light);
            text-align: center;
            max-width: 480px;
            box-shadow: 0 30px 50px rgba(0,0,0,0.7);
        }

        #welcomeScreen h1 {
            font-size: 38px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 12px;
        }

        #welcomeScreen p {
            font-size: 18px;
            margin-bottom: 30px;
            color: #ccc;
        }

        #logoutBtn {
            width: auto;
            padding: 12px 30px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid var(--primary);
            border-radius: 40px;
            font-weight: 500;
            transition: 0.3s;
        }

        #logoutBtn:hover {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* ‡§õ‡•ã‡§ü‡•á ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ */
        @media (max-width: 450px) {
            .auth-box { padding: 28px 18px; }
            h2 { font-size: 28px; }
        }
    </style>
</head>
<body>

    <!-- ‡§≤‡•â‡§ó‡§ø‡§® / ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ï‡§æ‡§∞‡•ç‡§° -->
    <div class="auth-box" id="authScreen">
        <h2 id="title">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
        <div class="subhead">AI Study Portal ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</div>

        <!-- ‡§≤‡•â‡§ó‡§ø‡§® ‡§´‡•â‡§∞‡•ç‡§Æ -->
        <div id="loginSection">
            <input type="email" id="email" class="form-input" placeholder="‡§à‡§Æ‡•á‡§≤" autocomplete="email">
            <input type="password" id="password" class="form-input" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°" autocomplete="current-password">
            <button class="btn-main" id="loginBtn">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç <i class="fas fa-arrow-right" style="margin-left:8px;"></i></button>
        </div>

        <!-- ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§´‡•â‡§∞‡•ç‡§Æ (‡§∂‡•Å‡§∞‡•Ç ‡§Æ‡•á‡§Ç ‡§õ‡§ø‡§™‡§æ) -->
        <div id="signupSection" class="hidden">
            <input type="text" id="s-name" class="form-input" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ" autocomplete="name">
            <input type="email" id="s-email" class="form-input" placeholder="‡§à‡§Æ‡•á‡§≤" autocomplete="email">
            <input type="password" id="s-password" class="form-input" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° (‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞)" autocomplete="new-password">
            <button class="btn-main" id="signupBtn">‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Å <i class="fas fa-user-plus" style="margin-left:8px;"></i></button>
        </div>

        <!-- Google ‡§¨‡§ü‡§® (‡§∏‡•Ä‡§ß‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•â‡§≤) -->
        <button class="btn-google" id="googleBtn">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" width="20" alt="Google">
            Google ‡§∏‡•á ‡§ú‡•Å‡•ú‡•á‡§Ç
        </button>

        <!-- ‡§ü‡•â‡§ó‡§≤ ‡§≤‡§ø‡§Ç‡§ï (‡§≤‡•â‡§ó‡§ø‡§® ‚Üî ‡§∏‡§æ‡§á‡§®‡§Ö‡§™) -->
        <p class="toggle-text" id="toggleText">
            ‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à? <a href="javascript:void(0)" id="toggleLink" style="color:var(--primary);">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</a>
        </p>
    </div>

    <!-- ‡§µ‡•á‡§≤‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® (‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶) -->
    <div id="welcomeScreen" class="hidden">
        <h1>‡§®‡§Æ‡§∏‡•ç‡§§‡•á, <span id="userNameDisplay">‡§õ‡§æ‡§§‡•ç‡§∞</span>! üëã</h1>
        <p>‡§Ü‡§™‡§ï‡•Ä ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡•á ‡§≤‡§ø‡§è AI ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡•§ <br> ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§∏‡•ç‡§ü‡§°‡•Ä ‡§ü‡•Ç‡§≤‡•ç‡§∏ ‡§≤‡•â‡§®‡•ç‡§ö ‡§π‡•ã‡§Ç‡§ó‡•á‡•§</p>
        <button class="btn-main" id="logoutBtn" style="width:auto; padding:10px 30px;">‡§≤‡•â‡§ó‡§Ü‡§â‡§ü</button>
    </div>

    <script>
        // ---------- Firebase Config (‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•Ä ‡§Ö‡§™‡§®‡•Ä ‡§ö‡§æ‡§¨‡•Ä) ----------
        const firebaseConfig = {
            apiKey: "AIzaSyCVaemlk94fyisQOD0y7XaR2J8sR7vrosw",
            authDomain: "ankita-3118d.firebaseapp.com",
            projectId: "ankita-3118d",
            storageBucket: "ankita-3118d.firebasestorage.app",
            messagingSenderId: "20444353775",
            appId: "1:20444353775:web:e76d8677769a3cb64d771a"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ---------- Auth State Observer ----------
        auth.onAuthStateChanged((user) => {
            const authScreen = document.getElementById('authScreen');
            const welcomeScreen = document.getElementById('welcomeScreen');
            const userNameSpan = document.getElementById('userNameDisplay');

            if (user) {
                authScreen.classList.add('hidden');
                welcomeScreen.classList.remove('hidden');
                // Display name ‡§Ø‡§æ email ‡§ï‡§æ ‡§™‡§π‡§≤‡§æ ‡§≠‡§æ‡§ó ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å
                const displayName = user.displayName || (user.email ? user.email.split('@')[0] : '‡§õ‡§æ‡§§‡•ç‡§∞');
                userNameSpan.innerText = displayName;
            } else {
                authScreen.classList.remove('hidden');
                welcomeScreen.classList.add('hidden');
            }
        });

        // ---------- ‡§à‡§Æ‡•á‡§≤/‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≤‡•â‡§ó‡§ø‡§® ----------
        document.getElementById('loginBtn').addEventListener('click', async () => {
            const email = document.getElementById('email').value.trim();
            const pass = document.getElementById('password').value;
            if (!email || !pass) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç');
                return;
            }
            try {
                await auth.signInWithEmailAndPassword(email, pass);
            } catch (error) {
                alert('‡§≤‡•â‡§ó‡§ø‡§® ‡§ó‡§≤‡§§‡•Ä: ' + error.message);
            }
        });

        // ---------- ‡§à‡§Æ‡•á‡§≤/‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ----------
        document.getElementById('signupBtn').addEventListener('click', async () => {
            const name = document.getElementById('s-name').value.trim();
            const email = document.getElementById('s-email').value.trim();
            const pass = document.getElementById('s-password').value;
            if (!name || !email || !pass) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç');
                return;
            }
            if (pass.length < 6) {
                alert('‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è');
                return;
            }
            try {
                const res = await auth.createUserWithEmailAndPassword(email, pass);
                // Firestore ‡§Æ‡•á‡§Ç ‡§®‡§æ‡§Æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                await db.collection('students').doc(res.user.uid).set({
                    Name: name,
                    Email: email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                // ‡§Ö‡§ó‡§∞ ‡§ö‡§æ‡§π‡•ã ‡§§‡•ã displayName ‡§≠‡•Ä ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•ã
                await res.user.updateProfile({ displayName: name });
            } catch (error) {
                alert('‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ó‡§≤‡§§‡•Ä: ' + error.message);
            }
        });

        // ---------- Google ‡§≤‡•â‡§ó‡§ø‡§® (‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡§æ) ----------
        document.getElementById('googleBtn').addEventListener('click', async () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            try {
                await auth.signInWithPopup(provider);
                // ‡§∏‡§´‡§≤ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ onAuthStateChanged ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§µ‡•á‡§≤‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ ‡§¶‡•á‡§ó‡§æ
            } catch (error) {
                alert('Google ‡§≤‡•â‡§ó‡§ø‡§® ‡§ó‡§≤‡§§‡•Ä: ' + error.message);
                // ‡§Ö‡§ó‡§∞ ‡§Ø‡§π ‡§è‡§∞‡§∞ ‡§Ü‡§è ‡§ï‡§ø ‡§ë‡§™‡§∞‡•á‡§∂‡§® ‡§Ö‡§≤‡§æ‡§â‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§§‡•ã Firebase ‡§ï‡§Ç‡§∏‡•ã‡§≤ ‡§Æ‡•á‡§Ç Google Auth ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç
            }
        });

        // ---------- ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ----------
        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.signOut();
        });

        // ---------- ‡§≤‡•â‡§ó‡§ø‡§® / ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ü‡•â‡§ó‡§≤ ----------
        const loginSection = document.getElementById('loginSection');
        const signupSection = document.getElementById('signupSection');
        const toggleLink = document.getElementById('toggleLink');
        const title = document.getElementById('title');

        toggleLink.addEventListener('click', (e) => {
            e.preventDefault();
            const isLoginVisible = !loginSection.classList.contains('hidden');

            if (isLoginVisible) {
                // ‡§Ö‡§≠‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à ‚Üí ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å
                loginSection.classList.add('hidden');
                signupSection.classList.remove('hidden');
                title.innerText = '‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç';
                toggleLink.innerText = '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç';
                document.querySelector('.subhead').innerText = '‡§®‡§Ø‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Å ‡§î‡§∞ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç';
            } else {
                // ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à ‚Üí ‡§≤‡•â‡§ó‡§ø‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å
                loginSection.classList.remove('hidden');
                signupSection.classList.add('hidden');
                title.innerText = '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç';
                toggleLink.innerText = '‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç';
                document.querySelector('.subhead').innerText = 'AI Study Portal ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à';
            }
        });
    </script>
</body>
</html>